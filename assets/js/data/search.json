[ { "title": "基板の設計ミスと修正に関して", "url": "/posts/fix-circuit-board/", "categories": "その他", "tags": "100kinsat, edusat, v1.0.0", "date": "2021-10-01 00:00:00 +0900", "snippet": "はじめにエデュサットの基板にはGPSセンサの回路に関して、設計ミスがあります。そのため、乾電池によるバッテリー駆動ではGPSセンサが動作しません。（一方でUSBケーブルでPCと接続しているときは動作します）ここでは設計ミスの内容と基板の修正方法に関して説明します。※修正が必要な基板は、基板上のシルクで「100kinSAT_ver3.4」と記載されているものが対象です。修正対象の基板GPSセンサの回路設計ミスについてエデュサットに搭載しているGPSセンサは5Vで駆動します。USBケーブルでPCとESPマイコンを接続しているときは、PCから5Vが供給されているためGPSセンサは動作します。し..." }, { "title": "スピーカーを鳴らしてみよう", "url": "/posts/speaker/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, speaker", "date": "2021-06-15 00:00:00 +0900", "snippet": "この記事で使うソースコードこの記事ではスピーカーの制御を行います。スピーカーはCanSatの起動音に使ったり、エラーのとき鳴らしたりすることができます。今回はドレミの音階を順番に鳴らすプログラムです。プログラムが起動するとスピーカーからドレミファソラシドと音が鳴ります。スピーカーソースコードの説明各音階の周波数をマクロで定義しています。#define mC 261.626 // ド#define mD 293.665 // レ#define mE 329.628 // ミ#define mF 349.228 // ファ#define mG 391.995 // ソ#define mA 4..." }, { "title": "スイッチの動作確認をしよう", "url": "/posts/button/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, button", "date": "2021-06-07 00:00:00 +0900", "snippet": "この記事で使うソースコードこの記事ではスイッチを使い動作確認を行います。100kinSATには入力用にタクトスイッチが用意されています。スイッチを押すとLEDが点灯、離すと消灯するプログラムを作成します。CanSatは競技開始後、自立走行で目標地点へ走行しなくてはなりません。そのため競技中はスイッチによる入力機能は必要としませんが、実験段階で各モード（状態遷移）を切り替えたり、ロケットや気球に搭載するタイミングで待機状態をオンにしたりするときに役立ちます。また、パラシュート放出を検出するためのフライトピンも原理的にはスイッチと同様となっています。スイッチのオンオフでLEDを制御ソースコー..." }, { "title": "ファイルの読み書きをしよう", "url": "/posts/sd-card-sample/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, SDカード", "date": "2021-05-20 00:00:00 +0900", "snippet": "今回はmicroSDカード（以下SDカードと表記）にテキストファイルを読み書きしてみます。SDカードにテキストファイルの読み書きができるとCanSatが取得したセンサの値や制御履歴をログとして残すことができます。SDカードスロットスケッチ例を読み込むまずはSDカードのサンプルスケッチを開きます。Arduino IDEメニューの「ファイル」&amp;gt;「スケッチ例」&amp;gt;「SD（esp32）」&amp;gt;「SD_Test」にSDカードのサンプルスケッチがあります。メニューにサンプルスケッチがない場合は、下記リポジトリにライブラリがあるのでここからダウンロードしてきます。 ..." }, { "title": "100kinSATの構成（システム設計）について", "url": "/posts/cansat-system-diagram/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, システム図", "date": "2021-05-02 00:00:00 +0900", "snippet": "ここでは100kinSATのシステム図を示して、100kinSATの構成がどのようになっているか説明します。100kinSATのシステム図 システム   制御系 ESP32 ミッション系 モータ、電熱線、センサ類 電源系 バッテリー 通信系 Wi-Fi、Bluetooth、マイコンとセンサ間の通信 構造系 基板、タイヤ、パラシュート 制御系CanSatを目的地ま..." }, { "title": "回路図の概要", "url": "/posts/electronic-circuit-articles/", "categories": "基礎編", "tags": "100kinsat, edusat, tutorial, pcb, 電子回路", "date": "2021-04-23 00:00:00 +0900", "snippet": "回路図下画像が100kinSATの回路図全体になりますサイト上で画像が見にくい場合はPDFをDLして参照してください→回路図PDF回路の概要マイコンCanSatの頭脳です、ここにプログラムを書き込むことで制御信号などを各素子に出力したり、センサーからの値を処理したりします。電源スイッチ、レギュレータ、コンデンサ、LEDで構成されています。電源のON/OFF、電池電圧から適切な電圧への降圧、電源ON時のLED点灯などの機能があります。スピーカースピーカーです。起動音を鳴らしたり、プログラム状況で特定の音を出すことででバックに利用します。スイッチ動作テストなどに使えるスイッチです。プッシュス..." }, { "title": "GPSセンサで取得した位置情報をGoogleマップに描画しよう", "url": "/posts/get-lat-lng-value-csv/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, gps sensor", "date": "2021-04-12 00:00:00 +0900", "snippet": "この記事で使うソースコードTeraTermのインストール緯度と経度を取得しようでGPSセンサから取得した情報から緯度・経度の値のみを取得することができました。ここでは、緯度・経度の情報をCSVファイルとして保存してGoogleに描画をしてみます。CanSatは競技のあと制御ログを提出する必要があります。制御ログには、「センサからAの値を取得した。だからBの制御をした」というような説明ができるようにログを残す必要があります。制御ログの考え方として秋田大学 平山先生の下記投稿が参考になると思います。#CanSat の「制御履歴」には、状態量の観測値だけでなく、制御量もなければ説得力のある記録..." }, { "title": "緯度と経度を取得しよう", "url": "/posts/get-lat-lng-value/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, gps sensor", "date": "2021-04-09 00:00:00 +0900", "snippet": "この記事で使うソースコードライブラリのインストールGPSセンサの値を取得しようでGPSセンサが受信する値を取得しました。受信した値は、緯度経度等の情報を含む文字の羅列でした。CanSatの制御プログラムを書いていく上では、ここから必要な情報を取り出す必要があります。CanSatの誘導においてGPSセンサから取得した値のうち、緯度と経度の情報を使う場合が多いです。ここでは、ライブラリを使ってGPSセンサが受信した値から、緯度と経度を取得していきます。最初にhttps://github.com/mikalhart/TinyGPSPlusのGitHubリポジトリからライブラリをインストールしま..." }, { "title": "9軸センサの値を取得しよう", "url": "/posts/get-imu-value/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, imu", "date": "2021-04-06 00:00:00 +0900", "snippet": "ライブラリのインストール100kinSATには9軸センサが搭載されています。加速度、ジャイロ、地磁気に関して、それぞれX・Y・Z軸の3方向測定できるので3×3で9軸センサとなっています。100kinSATのマイコン（ESP32）と9軸センサはI2C（アイスクエアドシー、アイツーシー）という通信規格でデータのやり取りを行います。I2C通信についてはここでは詳しく説明しません。9軸センサを簡単に扱えるライブラリがあるため、今回はそちらをインストールして使います。https://github.com/bolderflight/mpu9250-arduinoのGitHubリポジトリからライブラリ..." }, { "title": "モータの制御プログラムをライブラリ化しよう", "url": "/posts/motor-library/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, motor", "date": "2021-04-06 00:00:00 +0900", "snippet": "この記事で使うソースコードここではモータの制御プログラムを関数化しようで書いたプログラムをファイル分割してライブラリ化します。モータの制御プログラムはAのファイル、センサのプログラムはBのファイルというように分割して作成することで、役割ごとにプログラムを分けることができます。分割したプログラムはライブラリとして読み込むことで使用できます。ライブラリ化しておくと、様々なプログラムで再利用することが可能となり、大規模なプログラムや似た処理のプログラムを作るときに楽ができます。ヘッダファイルとcppファイルの作成まずはArudino IDE上部メニューの「ファイル」から「新規ファイル」をクリッ..." }, { "title": "モータの制御プログラムを関数化しよう", "url": "/posts/motor-function/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, motor", "date": "2021-04-03 00:00:00 +0900", "snippet": "この記事で使うソースコードここではモータを制御しようで書いたプログラムを関数化します。関数化することでよく使うプログラムを何度も書かずに使いまわすことができます。また、ソースコードの削減や可読性の向上が期待できます。関数を作成するArduinoのプログラムはsetup関数とloop関数が必要です。それ以外に関数を追加したい場合は下記のようにfunction1()やfunction2()を追加します。void setup() { // ここに最初に1回だけ実行する処理を書く}void loop() { // ここに繰り返す処理を書く}void function1() { // ここに..." }, { "title": "GPSセンサの値を取得しよう", "url": "/posts/get-gps-value/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, gps", "date": "2021-03-28 00:00:00 +0900", "snippet": "この記事で使うソースコードGPSセンサについて100kinSATは秋月電子で購入できるGPSセンサを搭載しています。GPSセンサを使うと衛星から様々な情報を所得することができます。CanSat競技では、センサから緯度・経度の情報を所得することで自分の位置を把握してゴールに向かう制御を行う方法が一般的です。しかし、今回用いるGPSセンサはある程度開けた場所でも5~10mの誤差があるため、ゴールまでの距離0mを達成するためにはカメラを用いる等ほかのセンサを組み合わせた工夫が必要になります。GPSセンサGPSセンサとマイコンの接続GPSセンサとマイコンはUARTで通信を行います。接続は以下の表..." }, { "title": "モータを制御しよう", "url": "/posts/control-motor/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, motor", "date": "2021-03-14 00:00:00 +0900", "snippet": "この記事で使うソースコードモータドライバモータを動かすためには大きな電流を必要とします。モータドライバICを使うことで簡単にモータを制御することができます。写真に写っているICが100kinSATのモータドライバIC（TB6612FNG）です。モータドライバICTB6612FNGは1つのICで2つのモータを制御することができます。モータの制御マイコンのGPIOピン3つ（IN1、IN2、PWM）で1つのモータを制御します。IN1とIN2のHIGHとLOWの組み合わせでモータの正転と逆転、ストップ、ブレーキを操作できます。PWMは0～255までの値を指定し、モータの回転速度の強弱を制御するこ..." }, { "title": "複数のセンサを組み合わせる", "url": "/posts/multiple-sensors/", "categories": "CanSatをはじめよう, 応用編", "tags": "100kinsat, edusat, advanced, multiple sensors", "date": "2021-03-13 00:00:00 +0900", "snippet": "安全な設計思想とはものづくりを行う上で安全管理は非常に重要です。たとえば、CanSatを上空から放出したときに着地判定を誤ってしまうとパラシュートを上空で切り離すことになり大変危険です。ここでは、安全な設計について説明します。複数のセンサを組み合わせたシステム開発CanSatの落下判定におけるポイントは以下の2つです。 落下中にパラシュートを切り離さない 着地したら確実にパラシュートを切り離すこのような着地判定をするためには複数のセンサを組み合わせたシステム開発が必要になります。100kinSATに搭載されている(1)フライトピン、(2)加速度センサ、(3)タイマーの3つを組み合わせ..." }, { "title": "パラシュートの作り方", "url": "/posts/make-parachute/", "categories": "CanSatをはじめよう, 基礎編", "tags": "100kinsat, edusat, basic, parachute", "date": "2021-03-13 00:00:00 +0900", "snippet": "準備するもの 自転車カバー（または洗濯機カバー） タコ糸 ハサミ ものさし（50㎝、なければ30㎝のものでOK） 分度器（または三角定規） 穴あけパンチ パンチ穴補強シール作り方STEP1 自転車カバーを六角形に切る   　最初に、自転車カバーに六角形を描いていきます。三角定規の60度の部分(または分度器)をうまく使うことで簡単に六角形を作ることができます。　写真のパラシュートは対角線が30㎝となるような六角形で作っていますが、50㎝くらいの大きさであるほうが良いと思..." }, { "title": "最初に読むページ", "url": "/posts/getting-started/", "categories": "CanSatをはじめる前に, はじめに", "tags": "100kinsat, edusat, tutorial, contents", "date": "2021-03-13 00:00:00 +0900", "snippet": "100kinSATのリニューアルについて種子島ロケットコンテスト2024にて、100kinSATをリニューアルしました。メインのマイコンを新しくして、入手できなくなった部品等を見直しています。新しい100kinSATに関する解説記事はZennにて公開しています。旧100kinSATに関するページはそのまま残しますが、今後は以下の記事で新しい100kinSATを対象に情報を更新していく予定です。 https://zenn.dev/ymt117?tab=booksはじめにこのWebページは@_ymt_117が開発した初心者向けCanSat 100kinSAT（ひゃっきんさっと）のサポートペ..." }, { "title": "トラブルシューティング", "url": "/posts/trouble-shooting/", "categories": "その他, トラブルシューティング", "tags": "100kinsat, edusat, other, trouble shooting", "date": "2021-03-11 00:00:00 +0900", "snippet": "基板に電源が入らない電池ボックスには電池の極性に合わせた向きがあります。プラスとマイナスが逆になっていないか確認してください。はんだづけがしっかりできていない場合があります。テスターを使って各端子の導通チェックをしてみてください。コンパイルエラーが出たコンパイルエラーとなっている場合は、エラーメッセージに解決のヒントがあります。まずはエラーメッセージに書いてある内容を確認してください。エラーメッセージをWebで検索すると解決策が見つかることもあります。よくあるミスは、プログラムのスペルミス等です。プログラムの書き込みができないマイコンとPCが接続されているかマイコンとPCがUSBケーブル..." }, { "title": "LEDを制御しよう", "url": "/posts/board-check/", "categories": "CanSatをはじめる前に, 準備編", "tags": "100kinsat, edusat, tutorial, led", "date": "2021-03-11 00:00:00 +0900", "snippet": "この記事で使うソースコードLチカここではLEDの制御をします。プログラミングの世界では、C言語やJavaなどを初めて学ぶときに単にHello World!と表示するプログラムを作成することが多いです。電子工作の世界では、マイコンを初めて使うときにLEDを点滅させるLチカと呼ばれる実験をします。早速Lチカのプログラムを書き込んでLEDをチカチカさせましょう。まず開発環境のセットアップでインストールしたArduino IDEを起動してください。Arduino IDEを起動したら、以下のソースコード(blink.ino)を入力してください。#define LED 2void setup() {..." }, { "title": "開発環境のセットアップ", "url": "/posts/setup-the-development-environment/", "categories": "CanSatをはじめる前に, 準備編", "tags": "100kinsat, edusat, tutorial, arduino", "date": "2021-03-09 00:00:00 +0900", "snippet": "動作環境 OS Windows 10 IDE Arduino IDE ver1.8.X STEP1：Arduino IDEのインストールSTEP1ではArduino IDEのインストールを行います。公式サイトからインストールファイルをダウンロードします。ご自身のOSに合わせたインストーラをクリックします（画像では赤枠で囲ったWindows10向けのインストーラを選択）。公式サイトから自分のPCのOSに応じてダウンロードするダウンロードするだけなら「JUST DOWNLOAD」をクリックします。公式サイト..." }, { "title": "基板のはんだ付け", "url": "/posts/pcb-soldering/", "categories": "CanSatをはじめる前に, 準備編", "tags": "100kinsat, edusat, tutorial, soldering", "date": "2021-03-09 00:00:00 +0900", "snippet": "準備するものはんだ付けに必要な道具と電子部品を準備します。ここでは、はんだ付けに必要な道具について説明します。必要な電子部品については部品の入手方法のページを参考にしてください。はんだ付けに必要な道具(上記写真左側)を以下に示します。 はんだごて こて台 はんだ ニッパー ラジオペンチ はんだ吸い取り器 ピンセット マスキングテープはんだごては温度調整できるものがおすすめです。また、こて先を標準のものではなく、熱容量の大きいこて先に交換するとはんだ付けが楽になります。はんだは電子工作用と書かれたものであれば問題ないです。太さは0.3～0.8㎜くらいのものが適当です。ニッパ..." }, { "title": "部品の入手方法", "url": "/posts/get-the-electronic-components/", "categories": "CanSatをはじめる前に, 準備編", "tags": "100kinsat, edusat, tutorial, material", "date": "2021-03-09 00:00:00 +0900", "snippet": "はじめに100kinSATは、はんだ付け初心者でも実装しやすいモジュール化された電子部品を選定しています。また、価格を抑えるためにセンサ類やモータなどに関して、安いものを選定しています。入手先一覧以下に100kinSATで使われている電子部品の入手先や一覧を示します。表は横にスクロールできます。 名称 価格（円、税込） 購入先 通販コード 必要数 備考 ESSP32-DevKitC ESP-WROOM-32開発ボード 1480 秋月電子通商 M-1181..." }, { "title": "基板の入手方法", "url": "/posts/get-the-pcb-board/", "categories": "CanSatをはじめる前に, 準備編", "tags": "100kinsat, edusat, tutorial, pcb", "date": "2021-03-08 00:00:00 +0900", "snippet": "はじめに100kinSATの基板は設計データを中国の企業（ELECROW）に発注することで入手できます。注文にはクレジットカードが必要となります。料金は送料込みで10枚2000円ほどかかります。STEP1：ガーバデータの入手まずは基板の発注用データ（ガーバデータ）をダウンロードします。こちらからガーバデータ（100kinSAT_ver3.X.zip）をダウンロードしてください。「X」の数字が大きいものが新しいバージョンです。新しいバージョンのデータをインストールしてください。「Download」をクリックするとダウンロードできます。ダウンロードが完了したら、一度Zipファイルを解凍して以..." } ]
